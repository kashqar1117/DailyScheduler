<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <title>Work Day Scheduler</title>
</head>

<body>
  <header class="jumbotron">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="currentDay" class="lead"></p>
  </header>
  <div id="clockCon" class="container row">
    <!-- Timeblocks go here -->


    <!-- <div class="col-md-3 appendTimes hour ">9am</div>
      
      <textarea class=" textarea col-md-7"></textarea>

      <button  class = 'saveBtn' value="9"><i class="fa fa-lock" aria-hidden="true"></i></button> -->

    <!--      
      <div class="col-md-3 appendTimes hour ">10am</div>
      <textarea  class=" textarea col-md-7"></textarea>
      <button class = 'saveBtn' value = '10'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">11am</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn' value = '11'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">12pm</div>
      <textarea class="col-md-7"></textarea>
      <button value="12" class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">1pm</div>
      <textarea class="col-md-7"></textarea>
      <button value="1" class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">2pm</div>
      <textarea class="col-md-7"></textarea>
      <button value="2" class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">3pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">4pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">5pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">6pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">7pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">8pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">9pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">10pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>

      <div class="col-md-3 appendTimes hour ">11pm</div>
      <textarea class="col-md-7"></textarea>
      <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button> -->


  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

  <script src="../lib/moment/moment.min.js"></script>
  <script>

    //variables
    var saveButtons = $('.saveBtn')
    txtarea = $('.textarea')
    var currentTime = moment().format('h');
    console.log(currentTime)
    //timzoneClicked
    timeSlots = ['9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm', '7pm', '8pm', '9pm', '10pm', '11pm']

    var timeSlotText = loadData() || {}


    var clockCon = $('#clockCon')

    //dynamic clock
    setInterval(function () {
      $('#currentDay').text(moment().format('MMMM Do YYYY, h:mm:ss a'))
    }, 1000);
    generateTimeSlots()

    function generateTimeSlots() {

      for (var i = 0; i < timeSlots.length; i++) {
        var time = timeSlots[i];
        generateTimeSlot(time)



      }



    }

    function generateTimeSlot(time) {
      var momentTime = moment(time, 'h:a');
      var text = timeSlotText[time] || ""
      console.log(momentTime.fromNow())
      var div = `
     <div class="col-md-3 appendTimes hour ">${time}</div>
          <textarea  id = "text${time}" class="col-md-7"> ${text}</textarea>
          <button data-time = "${time}"  class = 'saveBtn'><i class="fa fa-lock noClick" aria-hidden="true"></i></button>`
      clockCon.append(div)


    }
    $(window).on("click", function (e) {
      console.log(e.target)
      if (e.target.classList.contains("saveBtn")) {
        var target = $(e.target)
        var t = target.data("time")

        var text = $(`#text${t}`).val()
        console.log(text)
        timeSlotText[t] = text
        console.log(timeSlotText)
        saveData(timeSlotText)
      }
    })
    function saveData(saveData) {
      localStorage.setItem("data", JSON.stringify(saveData))
    }
    function loadData() {
      d = localStorage.getItem("data")
      var parseData = JSON.parse(d)
      return parseData;


    }

  


    // $('.saveBtn').on('click', function(){
    //   console.log($(this).val())

    // })



    // <div class="col-md-3 appendTimes hour ">11pm</div>
    //       <textarea class="col-md-7"></textarea>
    //       <button  class = 'saveBtn'><i class="fa fa-lock" aria-hidden="true"></i></button>



    if (currentTime == $('.saveBtn').val()) {
      txtarea.addClass('present')

    }

  </script>
</body>

</html>